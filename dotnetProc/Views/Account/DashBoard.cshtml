@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    Layout = "_Layout";
}

@using HalloDoc_DAL.ViewModels;
@model HalloDoc_DAL.ViewModels.UserInformation;



<!-- Modal -->
<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-info">
                <h1 class="modal-title fs-5 text-white" id="staticBackdropLabel">Create New Request</h1>
                <button type="button" class="btn-close text-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body  ">

                <p>Here, I Want to create new request for...</p>


                <div class="d-flex  justify-content-center" style="column-gap:1rem;">


                    <input class="form-check-input rdInput" type="radio" value="" name="exampleRadios" id="exampleRadios1" style="display:none" onclick="makeBold('exampleRadios1')">
                    <label class="form-check-label rdLabel" for="exampleRadios1" style="width:6rem;height:2rem;display:flex;justify-content:center;align-items:center;border:1px solid #0dcaf0;border-radius:4px;white-space:unset;color:#0dcaf0">
                        ME
                    </label>
                    <input class="form-check-input rdInput " type="radio" value="" name="exampleRadios" id="exampleRadios2" style="display:none" onclick="makeBold('exampleRadios2')">
                    <label class="form-check-label rdLabel" for="exampleRadios2" style="width:14rem;height:2rem;display:flex;justify-content:center;align-items:center;border:1px solid #0dcaf0;border-radius:4px;white-space:unset;color:#0dcaf0">
                        Some One Else
                    </label>


                </div>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-info  text-white darkInfo-btn" onclick="changepage('exampleRadios1','exampleRadios2')">Continue</button>

                <button type="button" class="btn btn-outline-info lightInfo-btn"
                        onclick="">
                    Close
                </button>
            </div>
        </div>
    </div>
</div>




<partial name="_DashNavbar" />




<nav class="p-3">
    <div class="nav nav-tabs" id="nav-tab" role="tablist">
        <button class="nav-link active tab-btn " id="nav-home-tab" data-bs-toggle="tab" data-bs-target="#nav-home" type="button" role="tab" aria-controls="nav-home" aria-selected="true">Dashboard</button>
        <button class="nav-link tab-btn" id="nav-profile-tab" data-bs-toggle="tab" data-bs-target="#nav-profile" type="button" role="tab" aria-controls="nav-profile" aria-selected="false">Profile</button>
    </div>
</nav>


<div class="tab-content mt-5 " id="nav-tabContent">
    <div class="tab-pane fade show active" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab" tabindex="0">



        <div class="container-fluid mt-3">
            <div class="row justify-content-center">


                <div class="d-flex col-xl-8 col-lg-9 col-md-10 col-sm-11 col-12 justify-content-between">
                    <h3>Medical History</h3>
                   
                </div>


                <div class="col-xl-8 col-lg-9 col-md-10 col-sm-11 col-11 mt-3 ProviderMenuHeader">


                    <div class="row justify-content-end" style="border-radius:10px 10px 0px 0px;height: 6rem; align-items: center;background:var(--pi-form-back-color);">


                        <div class="col-12 d-flex justify-content-end">
                            <button type="button" class="btn btn-outline-info lightInfo-btn"
                                    data-bs-toggle="modal"
                                    data-bs-target="#staticBackdrop">
                                Create New Request
                            </button>
                        </div>

                    </div>


                </div>

            </div>


            <div class="row table-responsive" style="justify-content:center">
                <div id="UserRequestTableContainer" class="col-xl-8 col-lg-9 col-md-10 col-sm-11 col-11 p-0" style="box-shadow: rgb(0 0 0 / 15%) 0px 5px 15px 0px;border-radius: 0px 0px 10px 10px;">

                    <table  class="table UserTable">
                        <thead class="table-secondary">
                            <tr>
                                <th class="align-middle text-center" scope="col">Created Date</th>
                                <th class="align-middle text-center" scope="col">Current Status</th>
                                <th class="align-middle text-center" scope="col">Documents</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (DashBoardRequests request in Model.UserRequests)
                            {
                                <tr>
                                    <th class="align-middle text-center" scope="row">@request.createDate.ToString("MMM dd, yyyy")</th>
                                    <td class="align-middle  text-center">@request.Status</td>
                                    <td class="align-middle  text-center">
                                        <a class="nav-link" asp-route-id="@request.requestid" asp-action="ViewDocuments" asp-controller="Account">

                                            <button type="button" class="btn btn-outline-info lightInfo-btn">
                                                (@request.totalDocuments) Documents
                                            </button>
                                        </a>
                                    </td>
                                </tr>

                            }
                        </tbody>
                    </table>

                    @{
                        int i = 0;
                        <div class="accordion" id="mb-Documents">
                        @foreach (DashBoardRequests request in Model.UserRequests)
                        {


                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_@i" aria-expanded="true" aria-controls="collapse_@i">
                                        @request.createDate.ToString("MMM dd, yyyy")
                                    </button>
                                </h2>
                                <div id="collapse_@i" class="accordion-collapse collapse " data-bs-parent="#mb-Documents">
                                    <div class="accordion-body d-flex align-content-center justify-content-between">
                                        <h5>Status : @request.Status</h5>
                                        <a class="nav-link mx-3" asp-route-id="@request.requestid" asp-action="ViewDocuments" asp-controller="Account">

                                            <button type="button" class="btn btn-outline-info lightInfo-btn">
                                                (@request.totalDocuments) Documents
                                            </button>
                                        </a>
                                    </div>
                                </div>
                            </div>

                            i++;
                        }
                    </div>
                    }

                </div>



            </div>



        </div>




        




    </div>






    <div class="tab-pane fade" id="nav-profile" role="tabpanel" aria-labelledby="nav-profile-tab" tabindex="0">



        <div class="container-fluid mt-3">
            <div class="row justify-content-center">


                <div class="d-flex col-xl-8 col-lg-9 col-md-10 col-sm-11 col-12 justify-content-between">
                    <h2>User Profile</h2>
                    <button class="btn btn-outline-info text-info lightInfo-btn" onclick="changeTab()">
                        <i class="bi bi-chevron-left text-info lightInfo-btn "></i>Back
                    </button>
                </div>


                <div class="col-xl-8 col-lg-9 col-md-10 col-sm-11 col-12 mt-3">  


                    <form asp-controller="Account" asp-action="PostDashBoard" method="post">


                        <div class="container-fluid formContainer mb-5">
                            <div class="row mt-3">
                                <h4 class="mt-3 mb-3">Generel Information </h4>
                                <div class="col-xl-6 col-sm-6 col-12">
                                    <div class="form-floating mb-3">
                                        <input asp-for="@Model.User.Firstname" type="text" class="form-control tbDisabled" id="floatingInput"
                                               placeholder="name@example.com">
                                        <label for="floatingInput">First Name</label>
                                    </div>
                                </div>
                                <div class="col-xl-6 col-sm-6 col-12">
                                    <div class="form-floating mb-3">
                                        <input asp-for="@Model.User.Lastname" type="text" class="form-control tbDisabled" id="floatingInput"
                                               placeholder="name@example.com">
                                        <label for="floatingInput">Last Name</label>
                                    </div>
                                </div>
                                <div class="col-xl-6 col-sm-6 col-12">
                                    <div class="form-floating mb-3">
                                        <input asp-for="@(Model.User.Birthdate)" type="date" class="form-control tbDisabled" id="floatingInput"
                                               placeholder="name@example.com">
                                        <label for="floatingInput">Date Of Birth</label>
                                    </div>
                                </div>
                            </div>

                            <div class="row mt-3">
                                <h4 class="mb-3">Contact Information</h4>

                                

                                <div class="col-xl-6 col-sm-6 col-12">
                                    <div class="form-floating mb-3 phoneInputDiv">
                                        <input asp-for="@Model.User.Phonnumber" style='height: 57px;' type="tel" id='phonInput' class="form-control tbDisabled"
                                               id="floatingInput">
                                        <label for="floatingInput"></label>
                                    </div>
                                </div>
                                <div class="col-xl-6 col-sm-6 col-12">
                                    <div class="form-floating mb-3">
                                        <input asp-for="@Model.User.Email" type="email" class="form-control emailInp tbDisabled" id="floatingInput"
                                               placeholder="name@example.com">
                                        <label for="floatingInput">Email</label>
                                    </div>
                                </div>


                            </div>

                            <div class="row mt-3">
                                <h4 class="mb-3">Location Information</h4>
                                <div class="col-xl-6 col-sm-6 col-12">
                                    <div class="form-floating mb-3">
                                        <input asp-for="@Model.User.Address.Street" type="text" class="form-control tbDisabled" id="street"
                                               placeholder="name@example.com">
                                        <label for="floatingInput">Street</label>
                                    </div>
                                </div>
                                <div class="col-xl-6 col-sm-6 col-12">
                                    <div class="form-floating mb-3">
                                        <input asp-for="@Model.User.Address.City" type=" text" class="form-control tbDisabled" id="city"
                                               placeholder="name@example.com">
                                        <label for="floatingInput">City</label>
                                    </div>
                                </div>
                                <div class="col-xl-6 col-sm-6 col-12">
                                    <div class="form-floating mb-3">
                                        <select id="sl" asp-for="@Model.User.Address.State" class="form-control form-select tbDisabled" aria-label="Default select example">
                                            <option value="@Model.User.Address.State" selected>@Model.StateName</option>
                                            @foreach (Region region in Model.Regions)
                                            {
                                                if(region.Regionid != Model.User.Address.State)
                                                {
                                                <option value="@region.Regionid">@region.Name</option>
                                                    
                                                }
                                            }

                                        </select>
                                        <label for="floatingInput">State</label>

                                    </div>
                                </div>
                                <div class="col-xl-4 col-sm-6 col-12">
                                    <div class="form-floating mb-3">
                                        <input asp-for="@Model.User.Address.ZipCode" type=" number" class="form-control tbDisabled" id="zip"
                                               placeholder="name@example.com">
                                        <label for="floatingInput">Zip Code</label>
                                    </div>
                                </div>

                                <div class="col-xl-2 col-sm-4 col-6 d-flex  align-content-center">
                                    <div class="form-floating mb-3 d-flex justify-content-center align-content-center">
                                        <button type="button" class="btn btn-outline-info text-info lightInfo-btn " style="width:6rem;" onclick="showLocation()">
                                            <i id='themeIcon' class="bi bi-geo-alt text-info fs-3"></i>
                                        </button>
                                    </div>
                                </div>

                            </div>

                            <div class="row justify-content-end p-3">
                                <div class="d-flex col-4 justify-content-end" style="column-gap: 1rem;">
                                    <button type="button" class="btn btn-info  text-white darkInfo-btn editBtn" onclick="editDetails()">Edit</button>
                                    <button type="submit" class="btn btn-info  text-white darkInfo-btn editMode" style="display:none;" onclick="()">Save</button>
                                    <button type="button" class="btn btn-outline-info text-info lightInfo-btn editMode" style="display:none;" onclick="cancleEdit()">
                                        Cancle
                                    </button>
                                </div>
                            </div>

                        </div>

                    </form>







                </div>

            </div>
        </div>






    </div>
</div>




@*<footer class="patientSubmitFooter" style="position: absolute;">
    <span>Terms and Conditions</span>
    <span>|</span>
    <span>Privacy Policy</span>
</footer>*@



<script>



    const changeTab = () => {

        $('#nav-home-tab').click();
    }


    $(document).ready(function () {


        $(".tbDisabled").attr("disabled", "true")
        toastr.remove();

        if ('@TempData["ShowPositiveNotification"]' != '') {

            toastr.success('@TempData["ShowPositiveNotification"]');
        } else if ('@TempData["ShowNegativeNotification"]' != '') {

            toastr.error('@TempData["ShowNegativeNotification"]')
        }
    })

  

    const changepage = (id1, id2) => {
        console.log(id1)
        console.log($(`#${id1}`)[0].checked)

        if ($(`#${id1}`)[0].checked) {
            window.location.href = '/Account/DashBoard/PatientForm';
        } else if ($(`#${id2}`)[0].checked) {
            window.location.href = '/Account/DashBoard/FormForOther';
        } else {
            toastr.warning("Please Select One Option!")
        }
    }







</script>




